<Window x:Class="TwitterStreaming.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:svc="clr-namespace:TwitterStreaming"
    Title="Twitter Streaming" Height="300" Width="300">
    <Window.Resources>
        <svc:TwitterTimeLine x:Key="status"/>
    </Window.Resources>
    <Grid Background="#222">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition />
        </Grid.RowDefinitions>
        <Grid Grid.Row="0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition />
                <RowDefinition />
                <RowDefinition />
            </Grid.RowDefinitions>
            <TextBox Grid.Column="0" Grid.RowSpan="2" x:Name="postTextBox" KeyDown="postTextBox_KeyDown"
                     VerticalContentAlignment="Center" TextChanged="postTextBox_TextChanged"
                 Background="#444" Foreground="White" BorderBrush="#888" BorderThickness="1" />
            <Button Grid.Column="1" Grid.Row="0" Padding="8 0 8 0" x:Name="postButton" Click="postButton_Click">Post</Button>
            <TextBlock Foreground="White" Grid.Column="1" Grid.Row="1" x:Name="postLengthText" HorizontalAlignment="Center" />
            <StackPanel Orientation="Horizontal" Grid.Row="2" Grid.ColumnSpan="2" VerticalAlignment="Center">
                <CheckBox Foreground="White" Checked="CheckBox_Checked" Unchecked="CheckBox_Checked">フォローしていない人の投稿を破棄する</CheckBox>
                <TextBlock Foreground="White" Margin="10 0 0 0">補完間隔(REST API):</TextBlock>
                <ComboBox SelectionChanged="ComboBox_SelectionChanged">
                    <ComboBox.Items>
                        <ComboBoxItem>15秒</ComboBoxItem>
                        <ComboBoxItem Selector.IsSelected="True">30秒</ComboBoxItem>
                        <ComboBoxItem>45秒</ComboBoxItem>
                        <ComboBoxItem>60秒</ComboBoxItem>
                    </ComboBox.Items>
                </ComboBox>
                <TextBlock Foreground="White" Margin="10 0 0 0">API Limit:</TextBlock>
                <TextBlock Foreground="White" x:Name="apiLimitLabel">Unknown</TextBlock>
            </StackPanel>
        </Grid>
        <ListBox
                Background="#222"
                Grid.Row="1"
                x:Name="timeline"
                SelectionMode="Extended"
                ItemsSource="{Binding Source={StaticResource status}}" 
                IsSynchronizedWithCurrentItem="True"
                ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                HorizontalContentAlignment="Stretch">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <svc:TwitterStatusViewer Status="{Binding}" LinkClick="TwitterStatusViewer_LinkClick" MouseDoubleClick="TwitterStatusViewer_MouseDoubleClick" />
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
    </Grid>
</Window>
